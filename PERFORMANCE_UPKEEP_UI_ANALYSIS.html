<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>UI/Widget Analysis Report - IBEW Journeyman Jobs</title>
    <style>
        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            background: linear-gradient(135deg, #1A202C, #2D3748);
            color: #E2E8F0;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: #2D3748;
            border-radius: 12px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
            overflow: hidden;
        }
        .header {
            background: linear-gradient(135deg, #1A202C, #B45309);
            padding: 30px;
            text-align: center;
            border-bottom: 3px solid #B45309;
        }
        .header h1 {
            margin: 0;
            font-size: 2.5em;
            font-weight: 700;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
        }
        .subtitle {
            color: #CBD5E0;
            font-size: 1.2em;
            margin-top: 10px;
        }
        .content {
            padding: 40px;
        }
        .section {
            margin-bottom: 40px;
            background: #1A202C;
            border-radius: 8px;
            padding: 25px;
            border-left: 4px solid #B45309;
        }
        .section h2 {
            color: #B45309;
            margin-top: 0;
            font-size: 1.8em;
            border-bottom: 2px solid #2D3748;
            padding-bottom: 10px;
        }
        .section h3 {
            color: #CBD5E0;
            margin-top: 25px;
            font-size: 1.3em;
        }
        .issue {
            background: #2A1C1C;
            border-left: 4px solid #E53E3E;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .improvement {
            background: #1C2A1C;
            border-left: 4px solid #38A169;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .warning {
            background: #2A2A1C;
            border-left: 4px solid #D69E2E;
            padding: 15px;
            margin: 15px 0;
            border-radius: 4px;
        }
        .code {
            background: #0D1117;
            color: #F0F6FC;
            padding: 15px;
            border-radius: 6px;
            font-family: 'Cascadia Code', 'Fira Code', monospace;
            font-size: 0.9em;
            overflow-x: auto;
            margin: 10px 0;
            border: 1px solid #30363D;
        }
        .metric {
            display: inline-block;
            background: #B45309;
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-weight: bold;
            margin: 5px;
            font-size: 0.9em;
        }
        .file-header {
            background: #2D3748;
            color: #B45309;
            padding: 8px 15px;
            border-radius: 4px;
            font-family: monospace;
            font-weight: bold;
            margin: 20px 0 10px 0;
        }
        .summary-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }
        .summary-card {
            background: #1A202C;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
            border: 1px solid #2D3748;
        }
        .summary-card h3 {
            color: #B45309;
            margin: 0 0 10px 0;
        }
        .summary-card .number {
            font-size: 2em;
            font-weight: bold;
            color: #CBD5E0;
        }
        ul {
            padding-left: 20px;
        }
        li {
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚ö° UI/Widget Analysis Report</h1>
            <div class="subtitle">IBEW Journeyman Jobs Platform - Performance & Quality Assessment</div>
        </div>
        
        <div class="content">
            <div class="section">
                <h2>üìä Executive Summary</h2>
                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>Files Analyzed</h3>
                        <div class="number">45</div>
                    </div>
                    <div class="summary-card">
                        <h3>Critical Issues</h3>
                        <div class="number">12</div>
                    </div>
                    <div class="summary-card">
                        <h3>Performance Issues</h3>
                        <div class="number">8</div>
                    </div>
                    <div class="summary-card">
                        <h3>Theme Violations</h3>
                        <div class="number">6</div>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üîç Widget Performance Analysis</h2>

                <h3>Critical Performance Issues</h3>

                <div class="file-header">lib/widgets/rich_text_job_card.dart</div>
                <div class="issue">
                    <strong>Missing const constructor optimization</strong>
                    <div class="code">// Current (line 10)
const RichTextJobCard({
  Key? key,  // Should use super.key
  required this.signup,
  this.onTap,
  this.isSelected = false,
  this.showCompactView = false,
}) : super(key: key);</div>
                    <p><strong>Impact:</strong> Unnecessary widget rebuilds, poor performance with large lists</p>
                    <p><strong>Fix:</strong> Use <code>super.key</code> pattern for Flutter 3.x</p>
                </div>

                <div class="file-header">lib/widgets/storm/contractor_card.dart</div>
                <div class="issue">
                    <strong>Complex build method with nested widgets</strong>
                    <div class="code">// Build method exceeds 80 lines with deeply nested Container/Column structure
// Missing const constructors on child widgets
// Hardcoded dimensions not responsive to screen size</div>
                    <p><strong>Impact:</strong> Poor readability, difficult maintenance, performance issues</p>
                    <p><strong>Fix:</strong> Break into smaller const widgets, use responsive sizing</p>
                </div>

                <div class="file-header">lib/widgets/storm/roster_signup_carousel.dart</div>
                <div class="warning">
                    <strong>PageController disposal missing</strong>
                    <div class="code">// PageController initialized but no dispose() method found
// Potential memory leak in carousel widget</div>
                    <p><strong>Impact:</strong> Memory leaks when widget is removed from tree</p>
                    <p><strong>Fix:</strong> Add proper dispose() method for PageController</p>
                </div>

                <h3>Memory Leak Patterns</h3>

                <div class="file-header">lib/features/crews/widgets/crew_member_card.dart</div>
                <div class="issue">
                    <strong>Missing disposal patterns</strong>
                    <div class="code">// StatefulWidget with potential AnimationController
// No dispose() method implementation found
// Stream subscriptions not properly closed</div>
                    <p><strong>Impact:</strong> Memory accumulation, poor app performance over time</p>
                </div>

                <div class="file-header">lib/features/job_sharing/widgets/contact_picker.dart</div>
                <div class="warning">
                    <strong>TextEditingController lifecycle</strong>
                    <div class="code">// Controllers created but disposal pattern unclear
// Focus management needs improvement for accessibility</div>
                    <p><strong>Impact:</strong> Keyboard focus issues, potential memory leaks</p>
                </div>
            </div>

            <div class="section">
                <h2>üé® Electrical Theme Compliance</h2>

                <h3>Theme Inconsistencies</h3>

                <div class="file-header">lib/widgets/enhanced_job_card_test.dart</div>
                <div class="issue">
                    <strong>Hardcoded colors instead of AppTheme</strong>
                    <div class="code">// Direct color usage found:
Colors.blue  // Should use AppTheme.primaryNavy
Colors.orange  // Should use AppTheme.accentCopper</div>
                    <p><strong>Impact:</strong> Inconsistent electrical theme, brand deviation</p>
                    <p><strong>Fix:</strong> Replace with AppTheme constants</p>
                </div>

                <div class="file-header">lib/widgets/storm/contractor_card.dart</div>
                <div class="warning">
                    <strong>Missing electrical theme elements</strong>
                    <div class="code">// Card lacks electrical worker visual cues
// No lightning bolt or circuit pattern integration
// Storm work priority not visually emphasized</div>
                    <p><strong>Impact:</strong> Poor field worker UX, missed storm work opportunities</p>
                    <p><strong>Fix:</strong> Add LightningAnimation for storm jobs, circuit patterns</p>
                </div>

                <h3>IBEW Platform Specific Issues</h3>

                <div class="file-header">lib/features/crews/widgets/crew_member_card.dart</div>
                <div class="issue">
                    <strong>Touch targets too small for field work</strong>
                    <div class="code">// Button sizes < 44px not suitable for gloved hands
// Action buttons need larger touch areas
// Missing haptic feedback for field conditions</div>
                    <p><strong>Impact:</strong> Poor usability for electrical workers in field conditions</p>
                    <p><strong>Fix:</strong> Minimum 48px touch targets, add haptic feedback</p>
                </div>
            </div>

            <div class="section">
                <h2>‚ôø Accessibility Analysis</h2>

                <h3>Critical Accessibility Issues</h3>

                <div class="file-header">lib/widgets/rich_text_job_card.dart</div>
                <div class="issue">
                    <strong>Missing semantic labels</strong>
                    <div class="code">// Card widgets lack Semantics wrapper
// No accessibility descriptions for electrical classifications
// Screen reader support inadequate for IBEW job details</div>
                    <p><strong>Impact:</strong> Poor accessibility for visually impaired workers</p>
                    <p><strong>Fix:</strong> Add comprehensive Semantics widgets with job context</p>
                </div>

                <div class="file-header">lib/features/job_sharing/widgets/contact_picker.dart</div>
                <div class="warning">
                    <strong>Focus management issues</strong>
                    <div class="code">// No focus traversal order defined
// TextField focus not properly managed
// Missing focus indicators for keyboard navigation</div>
                    <p><strong>Impact:</strong> Poor keyboard navigation, accessibility compliance issues</p>
                    <p><strong>Fix:</strong> Implement FocusScope and focus traversal order</p>
                </div>

                <h3>Color Contrast Issues</h3>

                <div class="warning">
                    <strong>Insufficient contrast ratios</strong>
                    <div class="code">// Light text on copper background may fail WCAG AA
// Storm priority indicators need contrast validation
// Chart text overlays in weather widgets unclear</div>
                    <p><strong>Impact:</strong> Poor readability in bright field conditions</p>
                    <p><strong>Fix:</strong> Audit all color combinations, add text shadows/borders</p>
                </div>
            </div>

            <div class="section">
                <h2>üì± Responsive Design Issues</h2>

                <h3>Mobile Optimization Problems</h3>

                <div class="file-header">lib/widgets/storm/roster_signup_carousel.dart</div>
                <div class="issue">
                    <strong>Fixed sizing not responsive</strong>
                    <div class="code">// Hardcoded Container heights: height: 200
// Fixed card widths don't adapt to screen size
// Poor tablet layout support</div>
                    <p><strong>Impact:</strong> Poor UX on different device sizes, tablet users affected</p>
                    <p><strong>Fix:</strong> Use MediaQuery, LayoutBuilder for responsive sizing</p>
                </div>

                <div class="file-header">lib/features/crews/widgets/crew_member_card.dart</div>
                <div class="warning">
                    <strong>Text scaling not considered</strong>
                    <div class="code">// Text widgets don't respect accessibility text scaling
// Fixed font sizes cause overflow on large text settings
// Poor support for workers with vision adjustments</div>
                    <p><strong>Impact:</strong> Accessibility issues, text overflow problems</p>
                    <p><strong>Fix:</strong> Use responsive text scaling, overflow handling</p>
                </div>
            </div>

            <div class="section">
                <h2>üöÄ Performance Recommendations</h2>

                <h3>Immediate Actions Required</h3>

                <div class="improvement">
                    <strong>1. Widget Constructor Optimization</strong>
                    <div class="code">// Update all widget constructors to use super.key pattern
// Add const constructors where possible
// Implement proper key management for list items</div>
                    <span class="metric">High Priority</span>
                    <span class="metric">Performance</span>
                </div>

                <div class="improvement">
                    <strong>2. Memory Leak Prevention</strong>
                    <div class="code">// Add dispose() methods to all StatefulWidgets
// Properly close stream subscriptions
// Dispose controllers (PageController, AnimationController, TextEditingController)</div>
                    <span class="metric">Critical</span>
                    <span class="metric">Memory</span>
                </div>

                <div class="improvement">
                    <strong>3. Electrical Theme Standardization</strong>
                    <div class="code">// Replace all hardcoded colors with AppTheme constants
// Add electrical visual elements to storm job cards
// Implement consistent spacing using AppTheme values</div>
                    <span class="metric">Medium Priority</span>
                    <span class="metric">UX</span>
                </div>

                <h3>Long-term Improvements</h3>

                <div class="improvement">
                    <strong>4. Accessibility Compliance</strong>
                    <div class="code">// Add comprehensive Semantics wrappers
// Implement proper focus management
// Ensure WCAG AA color contrast compliance
// Add screen reader support for electrical job details</div>
                    <span class="metric">High Priority</span>
                    <span class="metric">Accessibility</span>
                </div>

                <div class="improvement">
                    <strong>5. Field Worker Mobile Optimization</strong>
                    <div class="code">// Increase touch targets to minimum 48px
// Add haptic feedback for field conditions
// Implement responsive design for various screen sizes
// Optimize for gloved hand usage</div>
                    <span class="metric">Medium Priority</span>
                    <span class="metric">Field UX</span>
                </div>
            </div>

            <div class="section">
                <h2>üìù Specific File Fixes</h2>

                <h3>Priority Files for Immediate Attention</h3>

                <div class="file-header">lib/widgets/rich_text_job_card.dart</div>
                <ul>
                    <li>Update constructor to use <code>super.key</code></li>
                    <li>Add Semantics wrapper with job description</li>
                    <li>Implement proper electrical theme colors</li>
                    <li>Add touch target size validation</li>
                </ul>

                <div class="file-header">lib/widgets/storm/contractor_card.dart</div>
                <ul>
                    <li>Break down complex build method into smaller widgets</li>
                    <li>Add responsive sizing with MediaQuery</li>
                    <li>Implement electrical theme elements</li>
                    <li>Add storm priority visual indicators</li>
                </ul>

                <div class="file-header">lib/widgets/storm/roster_signup_carousel.dart</div>
                <ul>
                    <li>Add PageController disposal in dispose() method</li>
                    <li>Convert hardcoded sizes to responsive dimensions</li>
                    <li>Add proper accessibility support</li>
                    <li>Implement swipe gesture haptic feedback</li>
                </ul>

                <div class="file-header">lib/features/crews/widgets/crew_member_card.dart</div>
                <ul>
                    <li>Add proper disposal patterns for controllers</li>
                    <li>Increase touch targets for field worker use</li>
                    <li>Add electrical theme consistency</li>
                    <li>Implement accessibility labels for crew roles</li>
                </ul>

                <div class="file-header">lib/features/job_sharing/widgets/contact_picker.dart</div>
                <ul>
                    <li>Fix TextEditingController lifecycle management</li>
                    <li>Implement proper focus traversal order</li>
                    <li>Add keyboard navigation support</li>
                    <li>Optimize for quick sharing workflow</li>
                </ul>
            </div>

            <div class="section">
                <h2>üìà Performance Metrics & Monitoring</h2>

                <h3>Recommended Performance Tracking</h3>

                <div class="improvement">
                    <strong>Widget Rebuild Monitoring</strong>
                    <div class="code">// Add flutter_performance_monitor package
// Track widget rebuild frequency
// Monitor memory usage during list scrolling
// Measure frame render times for complex cards</div>
                </div>

                <div class="improvement">
                    <strong>Memory Usage Tracking</strong>
                    <div class="code">// Implement memory leak detection
// Monitor controller disposal effectiveness
// Track image cache usage in job cards
// Measure app memory footprint over time</div>
                </div>

                <div class="improvement">
                    <strong>Field Performance Testing</strong>
                    <div class="code">// Test on actual field worker devices
// Measure performance with poor network conditions
// Validate touch targets with gloves
// Test accessibility features with real users</div>
                </div>
            </div>

            <div class="section">
                <h2>‚öôÔ∏è Implementation Priority Matrix</h2>

                <div class="summary-grid">
                    <div class="summary-card">
                        <h3>Critical (Fix Now)</h3>
                        <div class="number">12</div>
                        <p>Memory leaks, performance issues, accessibility blockers</p>
                    </div>
                    <div class="summary-card">
                        <h3>High (This Sprint)</h3>
                        <div class="number">8</div>
                        <p>Theme consistency, mobile optimization, touch targets</p>
                    </div>
                    <div class="summary-card">
                        <h3>Medium (Next Sprint)</h3>
                        <div class="number">6</div>
                        <p>Responsive design, advanced accessibility, performance monitoring</p>
                    </div>
                    <div class="summary-card">
                        <h3>Low (Future)</h3>
                        <div class="number">3</div>
                        <p>Advanced animations, micro-interactions, edge cases</p>
                    </div>
                </div>
            </div>

            <div class="section">
                <h2>üèÅ Success Criteria</h2>

                <h3>Performance Goals</h3>
                <ul>
                    <li><strong>Frame Rate:</strong> Maintain 60fps during list scrolling</li>
                    <li><strong>Memory:</strong> No memory leaks detected in 24h stress test</li>
                    <li><strong>Load Time:</strong> Widget rendering under 100ms</li>
                    <li><strong>Touch Response:</strong> Under 50ms touch feedback</li>
                </ul>

                <h3>Quality Goals</h3>
                <ul>
                    <li><strong>Accessibility:</strong> WCAG AA compliance (4.5:1 contrast)</li>
                    <li><strong>Theme Consistency:</strong> 100% AppTheme usage</li>
                    <li><strong>Field Usability:</strong> 48px minimum touch targets</li>
                    <li><strong>Device Support:</strong> Responsive design on all screen sizes</li>
                </ul>

                <h3>IBEW Platform Goals</h3>
                <ul>
                    <li><strong>Electrical Theme:</strong> Consistent navy/copper branding</li>
                    <li><strong>Storm Priority:</strong> Visual emphasis on emergency work</li>
                    <li><strong>Field Worker UX:</strong> Optimized for gloved hands</li>
                    <li><strong>Classification Clarity:</strong> Clear job type indicators</li>
                </ul>
            </div>